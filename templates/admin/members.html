{% extends "admin/base.html" %}

{% block title %}Members - Admin{% endblock %}

{% block content %}
<h1>Members</h1>

<div role="group" style="margin-bottom: 2rem;">
    <a href="/admin/members/add" role="button">Add Member</a>
    <a href="/admin" role="button" class="secondary">Back to Dashboard</a>
</div>

{% if members %}
    <table role="grid">
        <thead>
            <tr>
                <th>Phone</th>
                <th>Name</th>
                <th>Role</th>
                <th>Status</th>
                <th>Join Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for member in members %}
            <tr id="member-{{ member.phone }}">
                <td>{{ member.phone }}</td>
                <td>{{ member.name }}</td>
                <td>
                    {% if member.role == "admin" %}
                        <mark data-mark="blue">admin</mark>
                    {% else %}
                        <mark data-mark="gray">member</mark>
                    {% endif %}
                </td>
                <td>
                    {% if member.status == "active" %}
                        <mark data-mark="green">active</mark>
                    {% elif member.status == "pending" %}
                        <mark data-mark="yellow">pending</mark>
                    {% elif member.status == "banned" %}
                        <mark data-mark="red">banned</mark>
                    {% endif %}
                </td>
                <td>{{ member.created }}</td>
                <td>
                    <button hx-get="/admin/members/{{ member.phone }}/edit" hx-target="#member-{{ member.phone }}" hx-swap="outerHTML" class="outline">Edit</button>
                    <button hx-get="/admin/members/{{ member.phone }}/remove" hx-target="#member-{{ member.phone }}" hx-swap="outerHTML" class="outline contrast">Remove</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <article>
        <p>No members yet</p>
    </article>
{% endif %}
{% endblock %}
